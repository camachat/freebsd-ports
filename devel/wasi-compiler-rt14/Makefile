MASTERDIR=	${.CURDIR:H:H}/devel/wasi-compiler-rt

DISTVERSION=	14.0.6
PKGNAMESUFFIX=	${LLVM_MAJOR}

CMAKE_ARGS=	-DCMAKE_C_COMPILER_WORKS=1 \
		-DCMAKE_SYSROOT=${WASI_SYSROOT} \
		-DLLVM_CONFIG_PATH=${LOCALBASE}/bin/llvm-config${LLVM_SUFFIX} \
		-DCOMPILER_RT_OS_DIR=wasi \
		-DCOMPILER_RT_BAREMETAL_BUILD=TRUE \
		-DCOMPILER_RT_DEFAULT_TARGET_TRIPLE=wasm32-wasi \
		-DCOMPILER_RT_EXCLUDE_ATOMIC_BUILTIN=TRUE \
		-DCOMPILER_RT_HAS_ASM_LSE:BOOL=OFF \
		-DCOMPILER_RT_HAS_ATOMIC_KEYWORD:BOOL=ON \
		-DCOMPILER_RT_HAS_FLOAT16:BOOL=OFF \
		-DCOMPILER_RT_HAS_FNO_BUILTIN_FLAG:BOOL=ON \
		-DCOMPILER_RT_HAS_FPIC_FLAG:BOOL=ON \
		-DCOMPILER_RT_HAS_FPIE_FLAG:BOOL=ON \
		-DCOMPILER_RT_HAS_FREESTANDING_FLAG:BOOL=ON \
		-DCOMPILER_RT_HAS_STD_C11_FLAG:BOOL=ON \
		-DCOMPILER_RT_HAS_VISIBILITY_HIDDEN_FLAG:BOOL=ON \
		-DCOMPILER_RT_HAS_XRAY_COMPILER_FLAG:BOOL=OFF

.include "${MASTERDIR}/Makefile"
